{% extends 'base.html' %}

{% block title %}Plano de Contas - Asaas Manager{% endblock %}

{% block content %}
<div class="mb-8 flex justify-between items-center">
    <div>
        <h1 class="text-3xl font-bold text-gray-900">Plano de Contas</h1>
        <p class="mt-2 text-gray-600">Gerencie suas categorias de receitas e despesas</p>
    </div>
    <a href="{% url 'plano_contas_create' %}" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
        <i class="fas fa-plus mr-2"></i> Nova Categoria
    </a>
</div>

<!-- Filtros -->
<div class="mb-6 bg-white shadow rounded-lg p-6">
    <form method="get" class="flex gap-4">
        <div class="flex-1">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-filter mr-1"></i> Tipo
            </label>
            <select name="tipo" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                <option value="">Todos</option>
                <option value="RECEITA" {% if tipo == 'RECEITA' %}selected{% endif %}>Receitas</option>
                <option value="DESPESA" {% if tipo == 'DESPESA' %}selected{% endif %}>Despesas</option>
            </select>
        </div>
        <div class="flex items-end">
            <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                <i class="fas fa-search mr-2"></i> Filtrar
            </button>
        </div>
        {% if tipo %}
        <div class="flex items-end">
            <a href="{% url 'plano_contas_list' %}" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                <i class="fas fa-times mr-2"></i> Limpar
            </a>
        </div>
        {% endif %}
    </form>
</div>

<!-- Lista de Categorias -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Receitas -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-6 py-4 border-b border-gray-200 bg-green-50">
            <h2 class="text-lg font-semibold text-green-700">
                <i class="fas fa-arrow-up"></i> Receitas
            </h2>
        </div>
        <div class="p-6">
            {% for categoria in categorias %}
                {% if categoria.tipo == 'RECEITA' %}
                <div class="mb-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="font-mono text-sm text-gray-500 mr-2">{{ categoria.codigo }}</span>
                                <span class="font-medium text-gray-900">{{ categoria.nome }}</span>
                            </div>
                            {% if categoria.descricao %}
                            <p class="text-sm text-gray-600 mt-1">{{ categoria.descricao }}</p>
                            {% endif %}
                            {% if categoria.categoria_pai %}
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-level-up-alt mr-1"></i> {{ categoria.categoria_pai.nome }}
                            </p>
                            {% endif %}
                        </div>
                        <div class="flex gap-2 ml-4">
                            <a href="{% url 'plano_contas_edit' categoria.pk %}" class="text-blue-600 hover:text-blue-800" title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                            <a href="{% url 'plano_contas_delete' categoria.pk %}" class="text-red-600 hover:text-red-800" title="Deletar">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- Despesas -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-6 py-4 border-b border-gray-200 bg-red-50">
            <h2 class="text-lg font-semibold text-red-700">
                <i class="fas fa-arrow-down"></i> Despesas
            </h2>
        </div>
        <div class="p-6">
            {% for categoria in categorias %}
                {% if categoria.tipo == 'DESPESA' %}
                <div class="mb-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="font-mono text-sm text-gray-500 mr-2">{{ categoria.codigo }}</span>
                                <span class="font-medium text-gray-900">{{ categoria.nome }}</span>
                            </div>
                            {% if categoria.descricao %}
                            <p class="text-sm text-gray-600 mt-1">{{ categoria.descricao }}</p>
                            {% endif %}
                            {% if categoria.categoria_pai %}
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-level-up-alt mr-1"></i> {{ categoria.categoria_pai.nome }}
                            </p>
                            {% endif %}
                        </div>
                        <div class="flex gap-2 ml-4">
                            <a href="{% url 'plano_contas_edit' categoria.pk %}" class="text-blue-600 hover:text-blue-800" title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                            <a href="{% url 'plano_contas_delete' categoria.pk %}" class="text-red-600 hover:text-red-800" title="Deletar">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

